<script>import Container, { getContainer } from '../Container.svelte';
import { onTick } from '../Ticker.svelte';
import { getRenderer } from '../Renderer.svelte';
/**
 * The alignment of the children
 *
 * @type {'left' | 'center' | 'right' | { horizontal: 'left' | 'center' | 'right', vertical: 'top' | 'center' | 'bottom' }}
 */
export let align = undefined;
export let instance = undefined;
export let bounds = 'local';
export let width = undefined;
export let height = undefined;
const { renderer } = getRenderer();
const { container } = getContainer();
let x = 0;
let y = 0;
function updatePosition() {
    const parentBounds = bounds === 'global'
        ? renderer.screen
        : {
            // ...container.getBounds(),
            width: width ?? container.width,
            height: height ?? container.height,
        };
    if (align) {
        if (typeof align === 'string') {
            switch (align) {
                case 'center':
                    x = parentBounds.width / 2;
                    y = parentBounds.height / 2;
                    break;
            }
        }
        else {
            const { horizontal, vertical } = align;
            switch (horizontal) {
                case 'left':
                    x = 0;
                    break;
                case 'right':
                    x = parentBounds.width - container.width;
                    break;
                case 'center':
                    x = parentBounds.width / 2 - container.width / 2;
                    break;
            }
            switch (vertical) {
                case 'top':
                    y = 0;
                    break;
                case 'bottom':
                    y = parentBounds.height - container.height;
                    break;
                case 'center':
                    y = parentBounds.height / 2 - container.height / 2;
                    break;
            }
        }
    }
}
$: updatePosition();
onTick(() => {
    updatePosition();
});
</script>

<Container bind:instance {x} {y} {...$$restProps}>
  <slot />
</Container>
